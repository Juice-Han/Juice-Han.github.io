---
layout: post
title: ⌈파이썬, 알고리즘⌋ 백준 10989번 수 정렬하기 3
---

문제 : N개의 수가 주어졌을 때, 이를 오름차순으로 정렬하는 프로그램을 작성하시오.

문제를 보자마자 '리스트를 만들고 sort함수 사용하면 금방 풀릴 문제겠네'라고 생각했다.

![백준10989번](/images/백준-10989.png)

그런데 아니었다. 시간 초과 오류가 계속 났다. 메모리 초과 오류도 계속해서 났다. 

새벽까지 풀어봤지만 도저히 답이 나오지 않아서 자고 일어나서 풀기로 마음먹었다.

확실히 자고 일어나니 머리가 맑아져서 새로운 해결방법들을 많이 생각해낼 수 있었다.

발생한 오류는 총 2가지 이다.

1. **시간 초과 오류**
2. **메모리 초과 오류**

각 오류별 나의 접근 방법과 해결 방법을 정리해보겠다.

## 시간 초과 오류

* 접근 방법

    1. **sort함수 활용**

        입력받은 수를 리스트에 저장 -> sort함수로 정렬 -> 출력
        
        하지만 시간 초과 오류가 발생했다.

        나는 sort함수가 시간을 많이 잡아먹는다고 판단하고 반복문을 활용해서 직접 정렬 알고리즘을 구현하려고 했다.

    2. **반복문을 활용한 정렬 알고리즘 직접 설계**

        ```Python
        n = int(input())
        nl = [int(input())]
        for i in range(n):
            c = 0 # 인덱스
            m = int(input())  # 수를 입력받고
            while c < len(nl) and nl[c] < m : # 크기를 비교하며 올바른 오름차순 인덱스 찾기
                c += 1
            if c == len(nl): # 만약 인덱스가 배열의 길이와 같다면 가장 큰 수라는 뜻
                nl.append(m) # 배열 마지막에 추가
            else:
                nl.insert(c,m) # 그게 아니라면 찾아낸 인덱스에 값 insert
        for a in nl:
            print(a)   
        ```

        코드 설명 : 입력받은 수의 인덱스가 while문을 돌면서 1씩 상승하고 오름차순으로 올바른 위치에 인덱스가 오게된다면 그곳에 수를 insert하는 방식

        하지만 이 방법도 시간초과 오류가 났다.

        이때부터 코드의 양이 많아서 시간이 초과됐다는 생각에 코드의 양을 줄여보려고 노력했다.(사실 코드의 양은 크게 상관이 없지만 그땐 몰랐다.)

    3. **입력받는 수의 범위가 1부터 10000까지라는 걸 활용한 코드 양 줄이기**

        맨 처음에 길이 10000짜리 리스트를 만들어서 입력받은 수에 해당하는 인덱스의 값을 1씩 증가시켰다.

        ```Python
        n = int(input())
        nl = [0 for _ in range(10000)] # 길이 10000짜리 0으로 된 list 생성
        # 인덱스 값 = 해당 수 - 1 관계
        for i in range(n):
            nl[int(input())-1] += 1
        for i in range(10000): 
            for j in range(nl[i]):
                print(i+1)
        ```

        해당 값을 프린트하는 과정도 줄이려고 for문을 활용해서 리스트의 값과 인덱스를 활용했다.

        하지만 시간 초과 오류는 없어지지 않았다.

    4. **print에 '\n'을 넣어서 출력 시간 단축시키기**

        ```Python
        n = int(input())
        nl = [0 for _ in range(10000)]
        for i in range(n):
            nl[int(input())] += 1
        for i in range(10000):
            if nl[i] > 0:
                print(f'{i+1}\n'* nl[i],end='') # f-string을 활용한 \n끼워 넣은 문자열 생성
        ```

        이렇게하면 print함수의 호출을 줄일 수 있어서 정답을 기대했지만 역시나 시간 초과 오류가 나왔다.

        이때 힌트를 얻으러 질문게시판에 가서 같은 고민을 겪고 있는 사람들의 질문글을 보았다. 그런데 특이한 점은 사람들이 공통적으로 
        
        `sys.stdin.readline()`이라는 입력 함수를 사용하는 것을 볼 수 있었다.

        구글링을 해보니 일반 input()함수는 호출하는 데 시간이 오래걸려서 반복적으로 사용할 경우 시간이 오래걸린다는 단점이 있다는 걸 알게 되었다.

    5. `sys.stdin.readline()`**를 사용해서 수 입력받기**

        ```Python
        import sys
        n = int(input())
        nl = [0 for _ in range(10000)]
        for i in range(n):
            nl[int(sys.stdin.readline().strip())-1] += 1
        s = ""
        for i in range(1,10001):
            if nl[i] != 0:
                s += (str(i)+'\n')*nl[i-1]
        print(s,end='')
        ```

        `sys.stdin.readline()`를 사용하니 시간초과 오류가 발생하지 않았다! 
        
        [sys.stdin.readline() 사용 방법 링크](https://velog.io/@yeseolee/Python-파이썬-입력-정리sys.stdin.readline)

        사실은 input이 문제였던 것이었다. 

        기뻤던 것도 잠시. 이젠 메모리 초과 오류가 발생하기 시작했다.

## 메모리 초과 오류

입력될 수 있는 문자가 10,000,000개까지 될 수 있다는 조건이 기억나서 

print함수에서 출력할 문자열을 만들 때 메모리 초과 오류가 나온다는 걸 직감할 수 있었다.

그래서 혹시 print를 대체할 효율적인 함수가 있는지 구글링 해서 sys 모듈의 `sys.stdout.write()`이 있다는 걸 알게 됐다.

* 접근 방법
    
    1. `sys.stdout.write()`**를 활용한 출력 시간 줄이기**

        print함수는 마지막에 개행문자를 삽입해줘서 호출 시간이 오래걸린다는 단점을 갖고있다. 따라서 직접 개행문자를 빠르게 삽입해주는 write함수를 써보기로 했다.

        [sys.stdout.write()함수 사용 방법 링크](https://velog.io/@sj9802/print문-대신-sys.stdout.write-을-쓰자)
        
        ```Python
        import sys
        n = int(input())
        nl = [0 for _ in range(10000)]
        for i in range(n):
            nl[int(sys.stdin.readline().strip())-1] += 1
        for i in range(10000):
            for a in range(nl[i]):
                sys.stdout.write(str(i+1) + '\n')
        ```

        결과는 "맞았습니다!!"

        드디어 문제를 풀었다.

## 이번 문제를 통해 배운 점

* 문제의 주어진 조건을 잘 확인하자.

* 문제가 발생했을 때 그 문제가 왜 발생했는지 논리적으로 생각하고, 해결방법을 차분하게 생각해내자.

* `input()`과 `print()`함수는 호출 속도가 느리다. 반복해서 입력받을 땐 `sys.stdin.readline()`과 `sys.stdout.write()` 를 활용하자.

* 항상 문제를 풀 때 내 코드가 정말 효율적인 코드인지 생각하자. 마구잡이로 내장 함수를 사용하지 말고, 내가 원하는 기능이 무엇인지, 그래서 그 기능만을 잘 구현해주는 최적의 함수는 무엇인지 생각하고 가져다 쓰자.

* 하나의 관점만 갖는 게 아닌 여러 관점에서 문제를 바라보자. 알고리즘 구현의 문제가 아닌 입력과 출력의 문제일 수도 있다는 것처럼.